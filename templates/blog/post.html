{% extends "blog/base.html" %}

{% block content %}
<div class="extends-base post-div" data-post-id="{{ post.id }}" data-user-id="{{ user.id }}">
    <h4><a href={% url 'index' %}>Powrót do strony głównej</a></h4>
    <h2>[{{ post.category }}],{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    <div class="image-container">
    <img src="{{ post.image.url }}" alt="{{ post.title }}"  >
    </div>
    {# <img src="{{ post.image.url }}" alt="{{ post.title }}"  >#}
    <p><em>Opublikowano: {{ post.pub_date }}</em></p>
    <p id="likes-{{ post.id }}">Likes: {{ post.likes.count }}</p>
{#    <p>Likes: {% for user in post.likes.all %}{{ user.username }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>#}
    <button onclick="likePost({{ post.id }})" id="like-button-{{ post.id }}" class="like-button">Like</button>
    {% if comments|length > 0 %}
        {% for comment in comments %}
        <table>
        <tr>
            <td><strong>{{ comment.author }}:</strong></td>
            <td><span>{{ comment.content }}</span></td>
        </tr>
        <tr><td colspan="2"><em>{{ comment.pub_date }}</em></td></tr>
    </table>
        {% endfor %}
    {% else %}
    <p>Nie ma komentarzy</p>
    {% endif %}
    {% if user.is_authenticated %}
    <form method="post" action="/blog/posts/{{ post.id }}">
        {% csrf_token %}
        <table>
            {{ form.as_table }}
        </table>
        <input type="submit" value="Skomentuj">
    </form>
    {% endif %}
</div>
{% endblock %}